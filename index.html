<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mermaid Editor — Mermaid 图表转图片工具</title>
  <meta name="description" content="在线 Mermaid 代码转图片工具，支持流程图、时序图、甘特图等，实时预览并一键导出 SVG/PNG。Online Mermaid diagram to image converter with live preview and SVG/PNG export.">
  <meta name="keywords" content="mermaid, mermaid转图片, mermaid to image, 流程图转图片, diagram to image, flowchart export, SVG export, PNG export, mermaid editor">
  <meta name="author" content="Mermaid Editor">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://ericcao.github.io/mermaid-pic/">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Mermaid Editor — Mermaid 图表转图片工具">
  <meta property="og:description" content="在线 Mermaid 代码转图片工具，实时预览，一键导出 SVG/PNG。Online Mermaid diagram to image converter.">
  <meta property="og:url" content="https://ericcao.github.io/mermaid-pic/">

  <!-- Favicon: Mermaid-style graph icon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' rx='6' fill='%23333'/><circle cx='16' cy='7' r='3' fill='%2300b4d8'/><circle cx='7' cy='25' r='3' fill='%2300b4d8'/><circle cx='25' cy='25' r='3' fill='%2300b4d8'/><line x1='16' y1='10' x2='7' y2='22' stroke='%2300b4d8' stroke-width='2'/><line x1='16' y1='10' x2='25' y2='22' stroke='%2300b4d8' stroke-width='2'/></svg>">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Caveat:wght@400;600&family=Long+Cang&display=swap">
  <link rel="stylesheet" href="style.css">
  <script type="importmap">
  {
    "imports": {
      "codemirror": "https://esm.sh/codemirror@6.0.1/es2022/codemirror.mjs",
      "@codemirror/state": "https://esm.sh/@codemirror/state@6",
      "@codemirror/view": "https://esm.sh/@codemirror/view@6",
      "@codemirror/language": "https://esm.sh/@codemirror/language@6",
      "@codemirror/autocomplete": "https://esm.sh/@codemirror/autocomplete@6",
      "@codemirror/commands": "https://esm.sh/@codemirror/commands@6",
      "@codemirror/lint": "https://esm.sh/@codemirror/lint@6",
      "@codemirror/search": "https://esm.sh/@codemirror/search@6",
      "@codemirror/theme-one-dark": "https://esm.sh/@codemirror/theme-one-dark@6",
      "@lezer/common": "https://esm.sh/@lezer/common@1",
      "@lezer/highlight": "https://esm.sh/@lezer/highlight@1",
      "@lezer/lr": "https://esm.sh/@lezer/lr@1",
      "codemirror-lang-mermaid": "https://esm.sh/codemirror-lang-mermaid@0.5.0"
    }
  }
  </script>
</head>
<body>
  <header class="toolbar">
    <h1 class="toolbar__title">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="5" r="3"/><circle cx="5" cy="19" r="3"/><circle cx="19" cy="19" r="3"/><line x1="12" y1="8" x2="5" y2="16"/><line x1="12" y1="8" x2="19" y2="16"/></svg>
      Mermaid Editor
    </h1>
    <div class="toolbar__controls">
      <label class="control-label">
        <span class="control-label__text" data-i18n="theme">主题 Theme</span>
        <select id="theme-select">
          <option value="default">Default</option>
          <option value="dark">Dark</option>
          <option value="forest">Forest</option>
          <option value="neutral">Neutral</option>
          <option value="base">Base</option>
        </select>
      </label>
      <label class="toggle" title="手绘风格 Hand-drawn style">
        <input type="checkbox" id="hand-drawn-toggle">
        <span class="toggle__track"><span class="toggle__thumb"></span></span>
        <span data-i18n="handdrawn">手绘 Hand-drawn</span>
      </label>
      <div class="toolbar__sep"></div>
      <label class="control-label" title="导出背景色 · Export background">
        <span class="control-label__text" data-i18n="exportbg">背景</span>
        <select id="export-bg-select">
          <option value="white">白色</option>
          <option value="transparent">透明</option>
          <option value="black">黑色</option>
          <option value="custom">自定义</option>
        </select>
        <input type="color" id="export-bg-custom" value="#ffffff" style="display:none;width:28px;height:24px;padding:1px 2px;border-radius:4px;cursor:pointer;">
      </label>
      <div class="toolbar__sep"></div>
      <div class="btn-group">
        <button id="btn-copy-svg" title="复制 SVG 代码 · Copy SVG code (Ctrl+Shift+C)">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
          <span data-i18n="copysvg">复制 SVG</span>
        </button>
        <button id="btn-copy-png" title="复制 PNG 图片 · Copy PNG image (Ctrl+Shift+P)">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
          <span data-i18n="copypng">复制 PNG</span>
        </button>
        <button id="btn-download-svg" title="下载 SVG 文件 · Download SVG (Ctrl+S)">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          SVG
        </button>
        <button id="btn-download-png" title="下载 PNG 文件 · Download PNG (Ctrl+Shift+S)">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          PNG
        </button>
      </div>
        <button id="btn-share" title="复制分享链接 · Copy share link">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
          <span data-i18n="share">分享 Share</span>
        </button>
        <button id="btn-copy-ai-prompt" title="复制 AI 提示词，粘贴给 AI 即可让它学会使用本工具 · Copy AI prompt">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a2 2 0 0 1 2 2v1h3a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h3V4a2 2 0 0 1 2-2z"/><path d="M9 12h6M9 16h4"/></svg>
          <span data-i18n="copyaiprompt">AI 提示词</span>
        </button>
      </div>
      <div class="toolbar__sep"></div>
      <button id="btn-help" class="btn-icon" title="使用教程 · Help">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
      </button>
      <button id="ui-theme-toggle" class="btn-icon" title="切换深色/浅色模式 · Toggle dark/light mode">
        <svg id="icon-sun" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
        <svg id="icon-moon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
      </button>
    </div>
  </header>

  <main class="editor-layout">
    <!-- Mobile tab bar -->
    <div class="mobile-tabs" id="mobile-tabs">
      <button class="mobile-tab active" id="tab-editor" data-i18n="editor">编辑器</button>
      <button class="mobile-tab" id="tab-preview" data-i18n="preview">预览</button>
    </div>
    <div class="panel panel--editor">
      <div class="panel__header">
        <span data-i18n="editor">编辑器 Editor</span>
        <span id="editor-status" class="panel__status"></span>
      </div>
      <div class="examples-strip" id="examples-strip"></div>
      <div id="editor-container"></div>
    </div>
    <div id="divider" title="拖拽调整面板大小 · Drag to resize"></div>
    <div class="panel panel--preview">
      <div class="panel__header">
        <span data-i18n="preview">预览 Preview</span>
        <div class="panel__actions">
          <button id="btn-zoom-out" class="btn-tiny" title="缩小 · Zoom out">
            <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="5" y1="12" x2="19" y2="12"/></svg>
          </button>
          <span id="zoom-label" class="zoom-label">100%</span>
          <button id="btn-zoom-in" class="btn-tiny" title="放大 · Zoom in">
            <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
          </button>
          <button id="btn-zoom-reset" class="btn-tiny" title="重置视图 · Reset view">
            <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
          </button>
          <div class="panel__sep-v"></div>
          <button id="btn-bg-toggle" class="btn-tiny" title="切换棋盘格背景 · Toggle checker background">
            <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 21V9"/></svg>
          </button>
          <span id="render-status" class="render-status"></span>
        </div>
      </div>
      <div id="preview-viewport" class="preview-viewport">
        <div id="mermaid-preview" class="preview-container"></div>
      </div>
    </div>
  </main>

  <div id="toast" class="toast"></div>

  <!-- Interactive Tour -->
  <div id="tour-overlay" class="tour-overlay" style="display:none">
    <div id="tour-curtain-top"    class="tour-curtain"></div>
    <div id="tour-curtain-bottom" class="tour-curtain"></div>
    <div id="tour-curtain-left"   class="tour-curtain"></div>
    <div id="tour-curtain-right"  class="tour-curtain"></div>
    <div id="tour-highlight" class="tour-highlight"></div>
    <div id="tour-tooltip" class="tour-tooltip">
      <div id="tour-step" class="tour-tooltip__step"></div>
      <div id="tour-title" class="tour-tooltip__title"></div>
      <div id="tour-body" class="tour-tooltip__body"></div>
      <div class="tour-tooltip__footer">
        <div id="tour-dots" class="tour-dots"></div>
        <div style="display:flex;gap:6px">
          <button id="tour-skip" class="tour-btn">跳过 Skip</button>
          <button id="tour-next" class="tour-btn primary">下一步 Next →</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Example picker modal (triggered from help button) -->
  <div id="help-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal">
      <div class="modal__header">
        <h2 id="modal-title">示例模板 · Examples</h2>
        <button id="modal-close" class="btn-icon" title="关闭 Close">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="modal__body">
        <div class="help-section">
          <h3>选择一个示例开始 · Pick an example to start</h3>
          <div class="example-grid">
            <button class="example-btn" data-code="graph TD
    A[开始 Start] --> B{判断 Decision}
    B -->|是 Yes| C[成功 OK]
    B -->|否 No| D[失败 Fail]
    C --> E[结束 End]
    D --> E">流程图<br>Flowchart</button>
            <button class="example-btn" data-code="sequenceDiagram
    participant 用户 as User
    participant 服务器 as Server
    用户->>服务器: 请求 Request
    服务器-->>用户: 响应 Response">时序图<br>Sequence</button>
            <button class="example-btn" data-code="classDiagram
    class Animal {
        +String name
        +makeSound()
    }
    class Dog {
        +fetch()
    }
    Animal &lt;|-- Dog">类图<br>Class</button>
            <button class="example-btn" data-code="gantt
    title 项目计划 Project Plan
    dateFormat YYYY-MM-DD
    section 阶段一 Phase 1
    设计 Design: 2024-01-01, 7d
    开发 Dev: 2024-01-08, 14d
    section 阶段二 Phase 2
    测试 Test: 2024-01-22, 7d">甘特图<br>Gantt</button>
            <button class="example-btn" data-code="pie title 占比 Distribution
    &quot;A&quot; : 40
    &quot;B&quot; : 30
    &quot;C&quot; : 20
    &quot;D&quot; : 10">饼图<br>Pie</button>
            <button class="example-btn" data-code="mindmap
  root((核心 Core))
    分支一 Branch1
      子节点 Child1
      子节点 Child2
    分支二 Branch2
      子节点 Child3">思维导图<br>Mindmap</button>
            <button class="example-btn" data-code="erDiagram
    USER ||--o{ ORDER : places
    ORDER ||--|{ LINE-ITEM : contains
    PRODUCT ||--o{ LINE-ITEM : includes">ER 图<br>ER Diagram</button>
            <button class="example-btn" data-code="stateDiagram-v2
    [*] --> 空闲 : 初始化
    空闲 --> 运行中 : 启动
    运行中 --> 暂停 : 暂停
    暂停 --> 运行中 : 恢复
    运行中 --> [*] : 停止">状态图<br>State</button>
            <button class="example-btn" data-code="graph LR
    subgraph 前端 Frontend
        A[浏览器 Browser]
    end
    subgraph 后端 Backend
        B[API 服务 API]
        C[数据库 DB]
    end
    A -->|HTTP| B
    B -->|SQL| C">架构图<br>Architecture</button>
          </div>
        </div>
        <div class="help-section">
          <h3>快捷键 · Shortcuts</h3>
          <table class="help-table">
            <tr><td>立即渲染 · Force render</td><td><kbd>Ctrl</kbd>+<kbd>Enter</kbd></td></tr>
            <tr><td>复制 SVG · Copy SVG</td><td><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>C</kbd></td></tr>
            <tr><td>复制 PNG · Copy PNG</td><td><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd></td></tr>
            <tr><td>下载 SVG · Download SVG</td><td><kbd>Ctrl</kbd>+<kbd>S</kbd></td></tr>
            <tr><td>下载 PNG · Download PNG</td><td><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>S</kbd></td></tr>
          </table>
        </div>
      </div>
      <div class="modal__footer">
        <button id="btn-restart-tour" class="tour-btn" style="background:var(--btn-bg);color:var(--btn-text);border-color:var(--border-color)">
          重新引导 · Restart Tour
        </button>
        <button id="modal-ok" class="btn-primary">关闭 Close</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
  <script type="module" src="app.js"></script>
</body>
</html>
